# Faith Journal iOS Project Rules

## Project Overview
This is a SwiftUI-based iOS app for spiritual journaling, prayer tracking, and daily devotionals. The app features Bible verses, journal entries, prayer requests, mood tracking, Apple Pencil support, live streaming, and AdSense integration.

## Live Streaming & AdSense Feature Validation (100% Required)

### Live Streaming Features
- **Automatically verify** LiveStreamManager initializes correctly
- **Automatically verify** WebRTCManager handles video/audio streams properly
- **Automatically verify** MultiGuestStreamManager supports multiple participants
- **Automatically verify** LiveStreamView displays video streams correctly
- **Automatically verify** LiveStreamDiscoveryView shows available streams
- **Automatically verify** LiveSession model stores session data properly
- **Automatically verify** LiveSessionParticipant model tracks participants
- **Automatically verify** StreamScheduler manages stream scheduling
- **Automatically verify** StreamAnalyticsView displays analytics data
- **Automatically verify** StreamBrandingManager handles branding elements
- **Automatically verify** VideoLibraryView shows recorded streams
- **Automatically verify** VideoUploadManager handles video uploads
- **Automatically verify** VideoMonetizationManager manages monetization
- **Automatically verify** VoiceToTextView converts speech to text
- **Automatically verify** ChatHighlightsManager manages chat highlights
- **Automatically verify** ChatMessage model stores chat data
- **Automatically fix** WebRTC connection issues by implementing proper signaling
- **Automatically fix** video stream quality issues by optimizing bitrate settings
- **Automatically fix** audio synchronization issues by implementing proper audio handling
- **Automatically fix** participant management issues by ensuring proper state management
- **Automatically fix** stream recording issues by implementing proper file handling

### AdSense Integration Features
- **Automatically verify** AdNetworkManager initializes correctly
- **Automatically verify** AdSenseSetupView configures ad settings properly
- **Automatically verify** MonetizationManager handles ad revenue tracking
- **Automatically verify** MonetizationSetupView allows ad configuration
- **Automatically verify** DonationManager processes donations correctly
- **Automatically verify** DonationSetupView configures donation options
- **Automatically verify** MerchandiseManager handles merchandise sales
- **Automatically verify** MerchandiseSetupView configures merchandise
- **Automatically verify** PremiumFeatureManager manages premium features
- **Automatically verify** PremiumSetupView configures premium options
- **Automatically verify** SubscriptionManager handles subscription billing
- **Automatically verify** Subscription model stores subscription data
- **Automatically verify** AnalyticsView displays analytics data
- **Automatically verify** AppStoreLaunchManager handles app store integration
- **Automatically verify** CloudBackupManager handles data backup
- **Automatically verify** CloudStorageManager manages cloud storage
- **Automatically verify** FaithJournalCloudService handles cloud operations
- **Automatically fix** ad loading issues by implementing proper ad unit IDs
- **Automatically fix** ad display issues by ensuring proper view hierarchy
- **Automatically fix** revenue tracking issues by implementing proper analytics
- **Automatically fix** subscription billing issues by ensuring proper receipt validation
- **Automatically fix** cloud sync issues by implementing proper data synchronization

### WebRTC & Video Streaming
- **Automatically verify** WebRTCManager establishes peer connections
- **Automatically verify** video encoding/decoding works properly
- **Automatically verify** audio capture and playback functions correctly
- **Automatically verify** network connectivity handling works
- **Automatically verify** bandwidth adaptation functions properly
- **Automatically verify** stream quality adjustment works
- **Automatically verify** participant join/leave handling works
- **Automatically verify** screen sharing functionality works
- **Automatically verify** recording functionality works
- **Automatically verify** playback of recorded streams works
- **Automatically fix** WebRTC connection failures by implementing proper ICE handling
- **Automatically fix** video quality issues by optimizing codec settings
- **Automatically fix** audio issues by implementing proper audio processing
- **Automatically fix** network issues by implementing proper connection management

### AdSense & Monetization
- **Automatically verify** Google AdSense SDK integration works
- **Automatically verify** banner ads display correctly
- **Automatically verify** interstitial ads show at appropriate times
- **Automatically verify** rewarded video ads function properly
- **Automatically verify** ad targeting works correctly
- **Automatically verify** ad revenue tracking functions
- **Automatically verify** ad performance analytics work
- **Automatically verify** ad refresh mechanisms work
- **Automatically verify** ad loading states are handled properly
- **Automatically verify** ad error handling works
- **Automatically fix** ad loading failures by implementing proper error handling
- **Automatically fix** ad display issues by ensuring proper view constraints
- **Automatically fix** revenue tracking issues by implementing proper analytics
- **Automatically fix** ad targeting issues by implementing proper user segmentation

### Subscription & Billing
- **Automatically verify** StoreKit integration works properly
- **Automatically verify** subscription purchase flow works
- **Automatically verify** subscription renewal handling works
- **Automatically verify** receipt validation functions correctly
- **Automatically verify** subscription status tracking works
- **Automatically verify** premium feature access control works
- **Automatically verify** subscription cancellation handling works
- **Automatically verify** subscription restoration works
- **Automatically verify** billing error handling works
- **Automatically verify** subscription analytics tracking works
- **Automatically fix** purchase flow issues by implementing proper StoreKit handling
- **Automatically fix** receipt validation issues by implementing proper validation logic
- **Automatically fix** subscription status issues by implementing proper state management
- **Automatically fix** billing error issues by implementing proper error handling

### Cloud Services & Backup
- **Automatically verify** CloudKit integration works properly
- **Automatically verify** data synchronization functions correctly
- **Automatically verify** backup creation and restoration works
- **Automatically verify** conflict resolution handles data conflicts
- **Automatically verify** offline data handling works
- **Automatically verify** cloud storage quota management works
- **Automatically verify** data migration between devices works
- **Automatically verify** cloud service error handling works
- **Automatically verify** data privacy and security measures work
- **Automatically verify** cloud analytics tracking works
- **Automatically fix** sync issues by implementing proper conflict resolution
- **Automatically fix** backup issues by implementing proper data serialization
- **Automatically fix** cloud connection issues by implementing proper retry logic
- **Automatically fix** data privacy issues by implementing proper encryption

### Analytics & Performance
- **Automatically verify** analytics data collection works
- **Automatically verify** performance metrics tracking works
- **Automatically verify** user behavior analytics work
- **Automatically verify** crash reporting functions properly
- **Automatically verify** custom event tracking works
- **Automatically verify** analytics dashboard displays data correctly
- **Automatically verify** real-time analytics updates work
- **Automatically verify** analytics data export functions
- **Automatically verify** privacy-compliant analytics implementation
- **Automatically verify** analytics data retention policies work
- **Automatically fix** analytics collection issues by implementing proper event tracking
- **Automatically fix** performance tracking issues by implementing proper metrics collection
- **Automatically fix** crash reporting issues by implementing proper error handling
- **Automatically fix** privacy compliance issues by implementing proper data anonymization

## Feature Validation & Auto-Fix (100% Required)

### Core Features Validation
- **Automatically verify** Bible Verse of the Day loads and displays correctly
- **Automatically verify** 50 devotionals are accessible and functional
- **Automatically verify** Journal entries can be created, edited, and deleted
- **Automatically verify** Prayer requests can be created and tracked
- **Automatically verify** Apple Pencil drawing functionality works
- **Automatically verify** Color theme selection works and persists
- **Automatically verify** Personalized greeting displays user's first name
- **Automatically verify** Settings view allows user name configuration

### Bible Verse Features
- **Automatically check** BibleVerseOfTheDayManager loads verses correctly
- **Automatically verify** 50 verses are available in the database
- **Automatically fix** missing verses by adding them to the manager
- **Automatically verify** daily verse selection works
- **Automatically verify** verse sharing functionality works
- **Automatically fix** verse loading errors by implementing proper error handling

### Devotional Features
- **Automatically check** DevotionalManager loads all 50 devotionals
- **Automatically verify** devotional categories work correctly
- **Automatically verify** favorite/unfavorite functionality works
- **Automatically verify** completion tracking works
- **Automatically verify** devotional search works
- **Automatically fix** missing devotionals by adding them to the database
- **Automatically verify** devotional detail view displays correctly

### Journal Entry Features
- **Automatically verify** NewJournalEntryView creates entries successfully
- **Automatically verify** text input works properly
- **Automatically verify** Apple Pencil drawing canvas works
- **Automatically verify** drawing tools (pen, pencil, eraser) work
- **Automatically verify** color selection for drawing works
- **Automatically verify** brush size adjustment works
- **Automatically verify** journal entries save to SwiftData
- **Automatically verify** journal list displays entries correctly
- **Automatically verify** journal entry editing works
- **Automatically verify** journal entry deletion works
- **Automatically fix** drawing canvas issues by ensuring proper PencilKit setup
- **Automatically fix** data persistence issues by checking SwiftData configuration

### Prayer Request Features
- **Automatically verify** NewPrayerRequestView creates requests successfully
- **Automatically verify** prayer request status tracking works
- **Automatically verify** answered/unanswered filtering works
- **Automatically verify** prayer request detail view works
- **Automatically verify** prayer request editing works
- **Automatically verify** prayer request deletion works
- **Automatically fix** prayer request data model issues

### Theme System Features
- **Automatically verify** ThemeManager singleton works correctly
- **Automatically verify** color theme selection persists across app launches
- **Automatically verify** theme colors apply to all UI elements
- **Automatically verify** dark/light mode support works
- **Automatically fix** theme persistence issues by checking UserDefaults
- **Automatically fix** theme application issues by ensuring proper color usage

### User Profile Features
- **Automatically verify** user name is stored in UserDefaults
- **Automatically verify** personalized greeting extracts first name correctly
- **Automatically verify** settings allow user name editing
- **Automatically verify** profile settings save correctly
- **Automatically fix** user name storage issues by implementing proper UserDefaults
- **Automatically fix** greeting display issues by ensuring proper string parsing

### Navigation Features
- **Automatically verify** TabView navigation works between all tabs
- **Automatically verify** NavigationView works in all detail screens
- **Automatically verify** sheet presentations work correctly
- **Automatically verify** navigation links work properly
- **Automatically fix** navigation issues by ensuring proper view hierarchy

### Data Persistence Features
- **Automatically verify** SwiftData models save correctly
- **Automatically verify** data relationships work properly
- **Automatically verify** data queries return correct results
- **Automatically verify** data deletion works properly
- **Automatically fix** SwiftData issues by checking model configurations
- **Automatically fix** relationship issues by ensuring proper model setup

### UI/UX Features
- **Automatically verify** all buttons respond to touch events
- **Automatically verify** text fields accept input correctly
- **Automatically verify** lists scroll smoothly
- **Automatically verify** images load and display correctly
- **Automatically verify** animations work smoothly
- **Automatically verify** accessibility features work
- **Automatically fix** UI responsiveness issues
- **Automatically fix** layout constraint issues

### Performance Features
- **Automatically verify** app launches within 3 seconds
- **Automatically verify** list scrolling is smooth
- **Automatically verify** memory usage stays within limits
- **Automatically verify** battery usage is optimized
- **Automatically fix** performance issues by optimizing view updates
- **Automatically fix** memory leaks by adding proper weak references

### Error Handling Features
- **Automatically verify** network errors are handled gracefully
- **Automatically verify** data loading errors show user-friendly messages
- **Automatically verify** validation errors are displayed clearly
- **Automatically verify** crash prevention mechanisms work
- **Automatically fix** missing error handling by adding proper try-catch blocks
- **Automatically fix** error message issues by implementing proper error types

### Accessibility Features
- **Automatically verify** VoiceOver reads all UI elements correctly
- **Automatically verify** Dynamic Type scaling works
- **Automatically verify** accessibility labels are present
- **Automatically verify** accessibility hints are helpful
- **Automatically verify** keyboard navigation works
- **Automatically fix** accessibility issues by adding proper labels and hints

### Testing Features
- **Automatically verify** unit tests pass for all managers
- **Automatically verify** UI tests cover critical user flows
- **Automatically verify** integration tests work for data operations
- **Automatically verify** accessibility tests pass
- **Automatically fix** failing tests by updating test implementations
- **Automatically fix** missing tests by adding coverage for untested features

### Build & Deployment Features
- **Automatically verify** app builds without warnings
- **Automatically verify** app installs on simulator correctly
- **Automatically verify** app launches without crashes
- **Automatically verify** all assets are included in the bundle
- **Automatically fix** build issues by resolving compilation errors
- **Automatically fix** missing assets by ensuring proper asset catalog setup

## Apple App Store Compliance (100% Required)

### App Store Review Guidelines Compliance
- **Automatically check** and ensure all app metadata follows App Store guidelines
- **Automatically verify** app description doesn't contain prohibited content
- **Automatically check** keywords don't violate trademark or copyright
- **Automatically ensure** app icon meets Apple's design requirements
- **Automatically verify** screenshots follow Apple's screenshot guidelines

### Privacy & Data Protection Compliance
- **Automatically check** Info.plist has all required privacy usage descriptions:
  - `NSMicrophoneUsageDescription` for voice features
  - `NSCameraUsageDescription` for camera features
  - `NSPhotoLibraryUsageDescription` for photo access
  - `NSFaceIDUsageDescription` for biometric authentication
  - `NSSpeechRecognitionUsageDescription` for voice-to-text
- **Automatically verify** App Tracking Transparency (ATT) implementation
- **Automatically check** GDPR compliance for EU users
- **Automatically ensure** data minimization and purpose limitation
- **Automatically verify** user consent mechanisms are properly implemented

### Technical Compliance
- **Automatically check** minimum iOS version compatibility (iOS 17.0+)
- **Automatically verify** app supports required device orientations
- **Automatically check** app works on all supported screen sizes
- **Automatically ensure** proper app lifecycle management
- **Automatically verify** background processing compliance
- **Automatically check** network security (ATS) requirements
- **Automatically ensure** proper error handling and crash prevention

### Content & Safety Compliance
- **Automatically check** all user-generated content for inappropriate material
- **Automatically verify** content moderation systems are in place
- **Automatically ensure** reporting mechanisms for harmful content
- **Automatically check** age-appropriate content classification
- **Automatically verify** no prohibited content (violence, adult content, etc.)

### Accessibility Compliance
- **Automatically check** VoiceOver support for all UI elements
- **Automatically verify** Dynamic Type support for text scaling
- **Automatically ensure** proper contrast ratios (WCAG 2.1 AA)
- **Automatically check** keyboard navigation support
- **Automatically verify** accessibility labels and hints
- **Automatically ensure** support for Switch Control and other assistive technologies

### Performance & Stability Compliance
- **Automatically check** app launch time under 3 seconds
- **Automatically verify** memory usage stays within limits
- **Automatically ensure** battery usage optimization
- **Automatically check** network usage efficiency
- **Automatically verify** crash-free sessions above 99%
- **Automatically ensure** proper error recovery mechanisms

### Monetization Compliance
- **Automatically check** in-app purchase implementation follows guidelines
- **Automatically verify** subscription terms are clearly stated
- **Automatically ensure** pricing is consistent across regions
- **Automatically check** refund mechanisms are properly implemented
- **Automatically verify** no deceptive pricing practices
- **Automatically ensure** proper receipt validation

### Legal Compliance
- **Automatically check** Terms of Service are comprehensive and accessible
- **Automatically verify** Privacy Policy covers all data collection
- **Automatically ensure** copyright compliance for all content
- **Automatically check** trademark usage is proper
- **Automatically verify** licensing agreements are properly implemented
- **Automatically ensure** export compliance (EAR/ITAR) if applicable

### App Store Connect Compliance
- **Automatically check** app metadata completeness and accuracy
- **Automatically verify** app preview videos meet requirements
- **Automatically ensure** app store optimization (ASO) best practices
- **Automatically check** localization compliance for all supported languages
- **Automatically verify** app store category selection is appropriate

### Security Compliance
- **Automatically check** code signing and provisioning profiles
- **Automatically verify** no hardcoded secrets or API keys
- **Automatically ensure** proper certificate pinning implementation
- **Automatically check** secure data transmission (HTTPS/TLS)
- **Automatically verify** proper keychain usage for sensitive data
- **Automatically ensure** biometric authentication follows security guidelines

### Testing Compliance
- **Automatically run** unit tests before each build
- **Automatically verify** UI tests cover critical user flows
- **Automatically check** integration tests for all external APIs
- **Automatically ensure** accessibility tests pass
- **Automatically verify** performance tests meet benchmarks
- **Automatically check** security tests for vulnerabilities

## Automatic Issue Resolution

### Swift Compiler Warnings & Errors
- **Automatically fix** unused variable warnings by removing or using the variable
- **Automatically fix** unused import statements by removing them
- **Automatically fix** force unwrapping warnings by using safe unwrapping
- **Automatically fix** missing return statements in closures
- **Automatically fix** type inference issues by adding explicit type annotations
- **Automatically fix** deprecated API usage with modern alternatives
- **Automatically fix** accessibility warnings by adding proper labels

### SwiftUI Specific Fixes
- **Automatically fix** missing `@State`, `@StateObject`, `@ObservedObject` property wrappers
- **Automatically fix** missing `@Environment` for dependency injection
- **Automatically fix** missing `@Query` for SwiftData models
- **Automatically fix** navigation issues by adding proper `NavigationView` wrappers
- **Automatically fix** sheet presentation issues by adding proper state management
- **Automatically fix** binding issues by ensuring proper `$` prefix usage
- **Automatically fix** preview issues by adding proper preview providers

### Code Quality Auto-Fixes
- **Automatically fix** missing access control modifiers (public, private, internal)
- **Automatically fix** missing documentation comments for public APIs
- **Automatically fix** inconsistent indentation and formatting
- **Automatically fix** missing error handling in data operations
- **Automatically fix** missing null checks and optional binding
- **Automatically fix** missing weak references in closures to prevent retain cycles

### Performance Auto-Fixes
- **Automatically fix** unnecessary view updates by optimizing `@State` usage
- **Automatically fix** memory leaks by adding proper weak references
- **Automatically fix** inefficient list rendering by using `LazyVGrid` and `LazyHStack`
- **Automatically fix** redundant view modifiers by combining them

### Data Model Auto-Fixes
- **Automatically fix** missing `@Model` annotations for SwiftData models
- **Automatically fix** missing `UUID` primary keys
- **Automatically fix** missing `createdAt` and `updatedAt` timestamps
- **Automatically fix** missing proper relationships between models
- **Automatically fix** missing enum cases for fixed value sets

### UserDefaults & App Storage Auto-Fixes
- **Automatically fix** missing `@AppStorage` for simple preferences
- **Automatically fix** missing `UserDefaults.standard` for complex data
- **Automatically fix** missing proper key names for stored values
- **Automatically fix** missing default values for stored preferences

## Code Style & Organization

### SwiftUI Views
- Use `@StateObject` for view models that need to persist
- Use `@ObservedObject` for external objects
- Use `@State` for local view state
- Use `@Environment` for dependency injection
- Use `@Query` for SwiftData model queries
- Prefer `VStack`, `HStack`, `LazyVGrid` for layout
- Use `.padding()`, `.background()`, `.cornerRadius()` for styling
- Keep views modular and reusable

### File Naming & Structure
- Views: `[Feature]View.swift` (e.g., `HomeView.swift`, `JournalView.swift`)
- Models: `[Feature].swift` (e.g., `JournalEntry.swift`, `PrayerRequest.swift`)
- Managers: `[Feature]Manager.swift` (e.g., `BibleVerseOfTheDayManager.swift`)
- Use PascalCase for all Swift types and files
- Group related files in the same directory

### Data Models
- Use `@Model` for SwiftData models
- Include proper relationships between models
- Use `UUID` for primary keys
- Include `createdAt` and `updatedAt` timestamps
- Use enums for fixed value sets (e.g., `MoodType`, `PrivacyLevel`)

### UserDefaults & App Storage
- Use `@AppStorage` for simple user preferences
- Use `UserDefaults.standard` for complex data
- Store user name as "userName" key
- Store theme preferences as "selectedTheme" key

## Feature-Specific Rules

### Bible Verses
- Store 50+ popular Bible verses
- Include verse text, reference, and translation
- Use `BibleVerseOfTheDay` model
- Random selection for daily verses

### Devotionals
- Include 50+ devotionals with titles, content, authors
- Use `Devotional` model with categories
- Support favorites and completion tracking
- Include scripture references

### Journal Entries
- Support both text and Apple Pencil drawing
- Use `JournalEntry` model with writing mode
- Include title, content, date, mood
- Support rich text formatting

### Prayer Requests
- Track prayer requests with status
- Include title, description, date created
- Support answered/unanswered status
- Use `PrayerRequest` model

### Theme System
- Use `ThemeManager` singleton
- Support multiple color themes
- Store theme preference in UserDefaults
- Apply themes consistently across views

### Apple Pencil Integration
- Use `PencilKit` framework
- Support `PKCanvasView` for drawing
- Include pen, pencil, eraser tools
- Support color and brush size selection

### Live Streaming
- Use WebRTC for real-time video/audio streaming
- Support multiple participants in streams
- Include chat functionality during streams
- Support stream recording and playback
- Include stream analytics and metrics

### AdSense & Monetization
- Use Google AdSense SDK for ad display
- Support banner, interstitial, and rewarded video ads
- Include subscription and donation features
- Support merchandise sales
- Include premium feature management

## UI/UX Guidelines

### Colors & Theming
- Use semantic colors (`.primary`, `.secondary`)
- Support dark/light mode
- Use consistent color schemes
- Apply theme colors to interactive elements

### Navigation
- Use `TabView` for main navigation
- Use `NavigationView` for detail screens
- Use `.sheet()` for modal presentations
- Use `.navigationLink()` for push navigation

### Accessibility
- Include proper accessibility labels
- Support VoiceOver
- Use semantic colors for contrast
- Provide alternative text for images

### Performance
- Use `LazyVGrid` and `LazyHStack` for large lists
- Minimize view updates
- Use `@StateObject` appropriately
- Avoid unnecessary re-renders

## Code Quality

### Error Handling
- Use proper error handling for data operations
- Provide user-friendly error messages
- Handle network failures gracefully
- Validate user input

### Testing
- Write unit tests for managers
- Test data persistence
- Test user interactions
- Mock external dependencies

### Documentation
- Use clear, descriptive comments
- Document complex business logic
- Include usage examples
- Document public APIs

## Project Structure
```
Faith Journal/
├── Faith Journal/
│   ├── Views/
│   │   ├── HomeView.swift
│   │   ├── JournalView.swift
│   │   ├── PrayerView.swift
│   │   ├── SettingsView.swift
│   │   ├── LiveStreamView.swift
│   │   ├── AdSenseSetupView.swift
│   │   └── MonetizationSetupView.swift
│   ├── Models/
│   │   ├── JournalEntry.swift
│   │   ├── PrayerRequest.swift
│   │   ├── UserProfile.swift
│   │   ├── LiveSession.swift
│   │   ├── ChatMessage.swift
│   │   └── Subscription.swift
│   ├── Managers/
│   │   ├── BibleVerseOfTheDayManager.swift
│   │   ├── ThemeManager.swift
│   │   ├── DevotionalManager.swift
│   │   ├── LiveStreamManager.swift
│   │   ├── WebRTCManager.swift
│   │   ├── AdNetworkManager.swift
│   │   └── MonetizationManager.swift
│   └── Utilities/
│       ├── Extensions/
│       └── Helpers/
```

## Dependencies
- SwiftUI for UI framework
- SwiftData for persistence
- PencilKit for Apple Pencil support
- WebRTC for live streaming
- Google AdSense SDK for monetization
- StoreKit for in-app purchases
- CloudKit for cloud services
- Foundation for basic utilities

## Build & Deployment
- Target iOS 17.0+
- Use Xcode 15+
- Support iPhone and iPad
- Include proper app icons and assets

## Security & Privacy
- Store sensitive data securely
- Request appropriate permissions
- Include privacy policy
- Handle user data responsibly

## Future Enhancements
- Cloud sync support
- Social features
- Advanced analytics
- Premium features
- Widget support 